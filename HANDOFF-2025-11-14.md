# Tax Genius Pro - Session Handoff Document
**Date:** November 14, 2025
**Session Focus:** Open Graph Image Implementation for Social Media Sharing

---

## ğŸ¯ What Was Accomplished

### 1. Open Graph Image Implementation
Implemented locale-aware Open Graph (OG) images for proper social media link previews on Facebook, WhatsApp, Twitter, LinkedIn, etc.

**Files Created:**
- `/public/og-image-en.jpg` - English Open Graph image (beach/palm tree "Unlock Your Financial Freedom" design)
- `/public/og-image-es.jpg` - Spanish Open Graph image (currently same as English)

**Files Modified:**
- `src/app/[locale]/layout.tsx` - Added dynamic `generateMetadata()` for locale-specific OG images
- `src/app/[locale]/page.tsx` - Converted to dynamic metadata generation
- `src/app/[locale]/preparer/layout.tsx` - Converted to dynamic metadata with locale awareness
- `src/lib/seo-llm/1-core-seo/metadata/metadata.ts` - Updated to use locale-specific default OG images
- `src/app/[locale]/careers/tax-preparer/atlanta-ga/layout.tsx` - Updated OG image reference
- `src/app/[locale]/careers/tax-preparer/miami-fl/layout.tsx` - Updated OG image reference
- `src/app/[locale]/careers/tax-preparer/new-york-ny/layout.tsx` - Updated OG image reference
- `src/app/[locale]/careers/tax-preparer/houston-tx/layout.tsx` - Updated OG image reference
- `src/app/[locale]/careers/tax-preparer/los-angeles-ca/layout.tsx` - Updated OG image reference

### 2. Git Commit
**Branch:** `feature/spanish-translation`
**Commit:** `037233d`
**Message:** "feat: Add locale-aware Open Graph images for social media sharing"

**What was committed:**
- New OG image files (English and Spanish)
- Metadata system updates for locale-aware OG images
- All city career page layout updates
- Dynamic metadata conversion for key pages

**Status:** âœ… Pushed to GitHub

---

## ğŸš€ Current Production Status

**Deployed:** âœ… Yes
**Site:** https://taxgeniuspro.tax
**Port:** 3005
**PM2 Status:** Running (restarted with latest build)

**Build Status:** âœ… Successful
**Application Status:** âœ… Running

---

## ğŸ“‹ How It Works

### Open Graph Image Logic

1. **Locale Detection:** The system detects the page locale (English `/en` or Spanish `/es`)

2. **Image Selection:**
   - English pages: `https://taxgeniuspro.tax/og-image-en.jpg`
   - Spanish pages: `https://taxgeniuspro.tax/og-image-es.jpg`

3. **Metadata Generation:**
   - Homepage uses dynamic `generateMetadata()` function
   - Preparer pages use dynamic `generateMetadata()` function
   - City career pages have static metadata with updated image URLs
   - All pages inherit from locale layout as fallback

4. **Image Specifications:**
   - Size: 1600x1280 pixels
   - Format: JPEG
   - File size: ~623KB
   - Recommended OG size: 1200x630 (current images are larger but will be cropped)

---

## âš ï¸ Known Issues & Notes

### Social Media Caching
**Issue:** WhatsApp and Facebook cache OG images aggressively

**Expected Behavior:**
- WhatsApp may take 1-24 hours to show the image
- Facebook requires manual cache clearing via [Sharing Debugger](https://developers.facebook.com/tools/debug/)
- Twitter/LinkedIn should pick up images automatically

**Solution for Facebook:**
1. Go to https://developers.facebook.com/tools/debug/
2. Enter URL (e.g., `https://taxgeniuspro.tax/en/careers/tax-preparer/atlanta-ga`)
3. Click "Scrape Again" button 2-3 times
4. Verify new image appears

### Current Image
The current OG image shows the "Unlock Your Financial Freedom" beach/palm tree design. This was copied from:
- Source: `/root/websites/taxgeniuspro/Ira folder/WhatsApp Image 2025-11-13 at 20.06.00 (1).jpeg`
- Note: User mentioned this might not be the intended final image

**Available Alternative Images:**
- `/root/websites/taxgeniuspro/Ira folder/Work From Home.png` (1.7M)
- `/root/websites/taxgeniuspro/Ira folder/flexabile hours.png` (359K)

---

## ğŸ” Testing & Verification

### How to Test OG Images

**1. Check Metadata on Live Site:**
```bash
curl -s https://taxgeniuspro.tax/en | grep 'og:image'
```

**Expected Output:**
```html
<meta property="og:image" content="https://taxgeniuspro.tax/og-image-en.jpg"/>
```

**2. Test City Pages:**
```bash
curl -s https://taxgeniuspro.tax/en/careers/tax-preparer/atlanta-ga | grep 'og:image'
curl -s https://taxgeniuspro.tax/en/careers/tax-preparer/miami-fl | grep 'og:image'
```

**3. Verify Image Accessibility:**
```bash
curl -I https://taxgeniuspro.tax/og-image-en.jpg
```
Should return: `HTTP/1.1 200 OK` with `Content-Type: image/jpeg`

**4. Facebook Sharing Debugger:**
- URL: https://developers.facebook.com/tools/debug/
- Test URLs:
  - https://taxgeniuspro.tax/en
  - https://taxgeniuspro.tax/en/careers/tax-preparer/atlanta-ga
  - https://taxgeniuspro.tax/en/careers/tax-preparer/miami-fl

---

## ğŸ“ File Locations

### Source Files
```
/root/websites/taxgeniuspro/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ og-image-en.jpg          # English OG image (NEW)
â”‚   â””â”€â”€ og-image-es.jpg          # Spanish OG image (NEW)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ [locale]/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx       # Locale-aware metadata (MODIFIED)
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx         # Homepage metadata (MODIFIED)
â”‚   â”‚   â”‚   â”œâ”€â”€ preparer/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx   # Preparer metadata (MODIFIED)
â”‚   â”‚   â”‚   â””â”€â”€ careers/tax-preparer/
â”‚   â”‚   â”‚       â”œâ”€â”€ atlanta-ga/layout.tsx    (NEW)
â”‚   â”‚   â”‚       â”œâ”€â”€ miami-fl/layout.tsx      (NEW)
â”‚   â”‚   â”‚       â”œâ”€â”€ new-york-ny/layout.tsx   (NEW)
â”‚   â”‚   â”‚       â”œâ”€â”€ houston-tx/layout.tsx    (NEW)
â”‚   â”‚   â”‚       â””â”€â”€ los-angeles-ca/layout.tsx (NEW)
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ seo-llm/
â”‚           â””â”€â”€ 1-core-seo/
â”‚               â””â”€â”€ metadata/
â”‚                   â””â”€â”€ metadata.ts          # Helper (MODIFIED)
```

### Original Image Location
```
/root/websites/taxgeniuspro/Ira folder/WhatsApp Image 2025-11-13 at 20.06.00 (1).jpeg
```

---

## ğŸ”„ Next Session Tasks (if needed)

### Optional Improvements

1. **Replace OG Image** (if current image is not desired)
   - User mentioned the current image might not be correct
   - Available alternatives in `/root/websites/taxgeniuspro/Ira folder/`
   - Process: Replace `/public/og-image-en.jpg` with desired image, rebuild, restart

2. **Spanish-Specific Image**
   - Currently using same image for both locales
   - Create Spanish version with translated text if needed

3. **Image Optimization**
   - Current image is 1600x1280 (optimal OG size is 1200x630)
   - Consider resizing to exact OG dimensions for faster loading
   - Compress JPEG to reduce file size (currently 623KB)

4. **Clear Social Media Caches**
   - Use Facebook Sharing Debugger for all important URLs
   - Wait for WhatsApp cache to refresh naturally (1-24 hours)

---

## ğŸ’» Development Commands

### Build & Deploy
```bash
# Build application
npm run build

# Restart production server
pm2 restart taxgeniuspro

# Check PM2 status
pm2 status

# View logs
pm2 logs taxgeniuspro --lines 50
```

### Git Operations
```bash
# Check status
git status

# View recent commits
git log --oneline -5

# Push changes
git push origin feature/spanish-translation
```

### Testing
```bash
# Test local server
curl -s http://localhost:3005/en | grep 'og:image'

# Test live site
curl -s https://taxgeniuspro.tax/en | grep 'og:image'

# Check image accessibility
curl -I https://taxgeniuspro.tax/og-image-en.jpg
```

---

## ğŸ“ Support Resources

### Documentation Links
- [Open Graph Protocol](https://ogp.me/)
- [Facebook Sharing Debugger](https://developers.facebook.com/tools/debug/)
- [Next.js Metadata API](https://nextjs.org/docs/app/building-your-application/optimizing/metadata)
- [WhatsApp Link Previews](https://faq.whatsapp.com/general/how-to-use-link-previews)

### Key Environment Variables
```bash
NEXT_PUBLIC_BASE_URL=https://taxgeniuspro.tax
PORT=3005
```

---

## âœ… Session Completion Checklist

- [x] OG images created and deployed
- [x] Metadata system updated for locale awareness
- [x] All city career pages updated
- [x] Application built successfully
- [x] Production server restarted
- [x] Changes committed to git
- [x] Changes pushed to GitHub
- [x] Live site tested
- [x] Documentation created

---

## ğŸ“ Technical Details

### Metadata Resolution Order (Next.js)
1. Page-level `generateMetadata()` or `metadata` export
2. Layout-level `generateMetadata()` or `metadata` export (nearest to page)
3. Parent layout metadata (bubbles up)
4. Root layout metadata (last fallback)

### Why Dynamic Metadata?
- Allows locale detection at render time
- Enables conditional logic for image selection
- Supports async operations if needed
- Better for internationalized sites

### Image Requirements for Social Platforms
- **Facebook:** 1200x630 px (minimum 600x315)
- **WhatsApp:** Uses Facebook's OG tags
- **Twitter:** 1200x628 px for summary_large_image
- **LinkedIn:** 1200x627 px
- **All:** JPEG or PNG, max 5MB

---

**End of Handoff Document**

*Generated: November 14, 2025*
*Project: Tax Genius Pro*
*Branch: feature/spanish-translation*
